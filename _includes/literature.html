{%- capture color -%}{{ include.color }}{%- endcapture -%}

{%- capture block -%}
  {%- if include.graphic == "yes" -%}
    {%- capture graphicSeed -%}
      {{ include.item.title }}
      {{ include.item.content }}
    {%- endcapture -%}
    {%- include random-graphic-block.html seed=graphicSeed hidden='touch' -%}
  {%- else -%}
    {%- include block.html background=include.color2 hidden='touch' -%}
  {%- endif -%}
{%- endcapture -%}

{%- capture picture -%}
  <div class="literature-picture">
    {%- if include.item.category == 'statistic' -%}
      <p class="statistic">{{ include.item.value }}</p>
    {%- elsif include.item.category == 'article' -%}
      <figure class="image">
        <img src="/assets/nouns/noun-quote.png" alt="quote">
      </figure>
    {%- elsif include.item.category == 'wikipedia' -%}
      <figure class="image">
        <img src="/assets/wikipedia-logo.png" alt="Wikipedia, The Free Encyclopedia">
      </figure>
    {%- elsif include.item.link -%}
      <figure class="image">
        <a href="{{ include.item.link }}">
          <img class="cover" src="/assets/literature/{{ include.item.reference }}.jpg" alt="{{ include.item.title }}">
        </a>
      </figure>
    {%- else -%}
      <figure class="image">
        <img class="cover" src="/assets/literature/{{ include.item.reference }}.jpg" alt="{{ include.item.title }}">
      </figure>
    {%- endif -%}

    {%- if include.item.error -%}
      <div class="error has-text-centered">
        {{ include.item.error | markdownify }}
      </div>
    {%- endif -%}

    {%- if include.item.attribution -%}
      <div class="attribution">
        {{ include.item.attribution | markdownify }}
      </div>
    {%- endif -%}
  </div>
{%- endcapture -%}

{%- capture content -%}
  <div class="literature-content-wrapper">
    <div class="literature-content">
      {%- if include.item.link -%}
        <p class="block">
          <i class="fas fa-arrow-alt-circle-right"></i>
          &nbsp;<a href="{{ include.item.link }}">Read more</a>
        </p>
      {%- endif -%}
      <h3 class="title is-5">{{ include.item.title }}</h3>
      {%- if include.item.author -%}
        <p class="subtitle is-6">{{ include.item.author }}</p>
      {%- endif -%}
      <div class="content">
        {{ include.item.content | markdownify }}
      </div>
    </div>
  </div>
{%- endcapture -%}

<div class="columns is-gapless literature">
  {%- if firstlast == "first" -%}{{ block }}{%- endif -%}

  {%- if include.leftright == "left" or include.item.category == "statistic" or include.item.category == "article" or include.item.category == "wikipedia" -%}
    {%- include block.html square=true big-mobile=true content=picture background=color -%}
    {%- include block.html content=content background=color -%}
  {%- else -%}
    {%- include block.html content=content background=color -%}
    {%- include block.html square=true big-mobile=true content=picture background=color -%}
  {%- endif -%}

  {%- if firstlast == "last" -%}{{ block }}{%- endif -%}
</div>
